
; /* Start:"a:4:{s:4:"full";s:64:"/bitrix/templates/esate_v2/js/jMenu.jquery.min.js?14234231522845";s:6:"source";s:49:"/bitrix/templates/esate_v2/js/jMenu.jquery.min.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
/************************************************************************
*************************************************************************
@Name    :      jMenu - jQuery Plugin
@Revison :      2.0
@Date    :      08/2013
@Author  :      ALPIXEL - (www.myjqueryplugins.com - www.alpixel.fr)
@Support :      FF, IE7, IE8, MAC Firefox, MAC Safari
@License :      Open Source - MIT License : http://www.opensource.org/licenses/mit-license.php

**************************************************************************
*************************************************************************/
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(2($){$.4={10:{I:\'17\',Y:1c,S:0,y:m,x:m,1r:3,s:7,16:i,6:{J:15,E:15,P:\'o\',14:\'o\',F:\'W\',D:\'W\'}},13:2(r){1=$.1I({},$.4.10,r);c(1.I==\'17\')$b=$(\'.U\').1K(i);g $b=1.I;$(".4 C").1p(2(){B $k=$(9).K(\'a:L\'),$1l=$(9).K(\'8\');c($.4.O($k)){$k.w(\'1f\');B $8=$k.R(),$h=$k.h();c($(9).1d(\'v-j-0\'))$8.z({p:$h.p+1.Y,l:$h.l+1.S,b:$b});g $8.z({p:$h.p,l:$h.l+$b,b:$b});c(!1.16)$(9).Z({1a:2(){$.4.G($8)},12:2(){$.4.H($8)}});g $(9).Z({1s:2(e){e.19();$.4.G($8)},12:2(){$.4.H($8)}})}})},G:2(5){18(1.6.P){n\'o\':5.d(3,3).f(1.y).1b(1.6.J,1.6.F);q;n\'T\':5.d(3,3).f(1.y).1e(1.6.J,1.6.F);q;Q:5.d(3,3).f(1.y).1g()}},H:2(5){18(1.6.14){n\'o\':5.d(3,3).f(1.x).1h(1.6.E,1.6.D);q;n\'T\':5.d(3,3).f(1.x).1i(1.6.E,1.6.D);q;Q:5.f(1.x).1j()}},1k:2(5){B A=1m(5.z(\'1n-l\'));5.1o(2(){$(9).d(3,i).11({s:A+1.s},m)},2(){$(9).d(3,i).11({s:A},m)})},O:2(5){c(5.R().1q(\'8\'))u 3;g u i},V:2(){c($(".v-j-0").1t>0)u 3;g u i},N:2(){1u(\'4 1v 1w\\\'t 1x 1y. 1z, 1A 1B 1C 1D \\\'.v-j-0\\\' 1E 1F 1G L j <C> 1H.\')}};M.1J.4=2(r){$(9).w(\'4\');$(9).X(\'C\').w(\'v-j-0\').X(\'a\').w(\'U\');c($.4.V()){$.4.13(r)}g{$.4.N()}}})(M);',62,109,'|opts|function|true|jMenu|el|effects||ul|this||width|if|stop||delay|else|position|false|level|thisChild|left|100|case|slide|top|break|options|paddingLeft||return|jmenu|addClass|TimeBeforeClosing|TimeBeforeOpening|css|paddingInit|var|li|effectClose|effectSpeedClose|effectOpen|_show|_closeList|ulWidth|effectSpeedOpen|find|first|jQuery|_error|_IsParent|effectTypeOpen|default|next|absoluteLeft|fade|fNiv|_isReadable|swing|children|absoluteTop|bind|defaults|animate|mouseleave|init|effectTypeClose|150|openClick|auto|switch|preventDefault|mouseenter|slideDown|33|hasClass|fadeIn|isParent|show|slideUp|fadeOut|hide|_animateText|allUl|parseInt|padding|hover|each|is|animatedText|click|length|alert|plugin|can|be|initialized|Please|check|you|have|the|class|on|your|elements|extend|fn|outerWidth'.split('|'),0,{}))

/* End */
;
; /* Start:"a:4:{s:4:"full";s:57:"/bitrix/templates/esate_v2/js/jquery-ui.js?14234231528662";s:6:"source";s:42:"/bitrix/templates/esate_v2/js/jquery-ui.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 *
 * Open source under the BSD License.
 *
 * Copyright © 2008 George McGinley Smith
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list
 * of conditions and the following disclaimer in the documentation and/or other materials
 * provided with the distribution.
 *
 * Neither the name of the author nor the names of contributors may be used to endorse
 * or promote products derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
*/

// t: current time, b: begInnIng value, c: change In value, d: duration
jQuery.easing['jswing'] = jQuery.easing['swing'];

jQuery.extend( jQuery.easing,
{
    def: 'easeOutQuad',
    swing: function (x, t, b, c, d) {
        //alert(jQuery.easing.default);
        return jQuery.easing[jQuery.easing.def](x, t, b, c, d);
    },
    easeInQuad: function (x, t, b, c, d) {
        return c*(t/=d)*t + b;
    },
    easeOutQuad: function (x, t, b, c, d) {
        return -c *(t/=d)*(t-2) + b;
    },
    easeInOutQuad: function (x, t, b, c, d) {
        if ((t/=d/2) < 1) return c/2*t*t + b;
        return -c/2 * ((--t)*(t-2) - 1) + b;
    },
    easeInCubic: function (x, t, b, c, d) {
        return c*(t/=d)*t*t + b;
    },
    easeOutCubic: function (x, t, b, c, d) {
        return c*((t=t/d-1)*t*t + 1) + b;
    },
    easeInOutCubic: function (x, t, b, c, d) {
        if ((t/=d/2) < 1) return c/2*t*t*t + b;
        return c/2*((t-=2)*t*t + 2) + b;
    },
    easeInQuart: function (x, t, b, c, d) {
        return c*(t/=d)*t*t*t + b;
    },
    easeOutQuart: function (x, t, b, c, d) {
        return -c * ((t=t/d-1)*t*t*t - 1) + b;
    },
    easeInOutQuart: function (x, t, b, c, d) {
        if ((t/=d/2) < 1) return c/2*t*t*t*t + b;
        return -c/2 * ((t-=2)*t*t*t - 2) + b;
    },
    easeInQuint: function (x, t, b, c, d) {
        return c*(t/=d)*t*t*t*t + b;
    },
    easeOutQuint: function (x, t, b, c, d) {
        return c*((t=t/d-1)*t*t*t*t + 1) + b;
    },
    easeInOutQuint: function (x, t, b, c, d) {
        if ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;
        return c/2*((t-=2)*t*t*t*t + 2) + b;
    },
    easeInSine: function (x, t, b, c, d) {
        return -c * Math.cos(t/d * (Math.PI/2)) + c + b;
    },
    easeOutSine: function (x, t, b, c, d) {
        return c * Math.sin(t/d * (Math.PI/2)) + b;
    },
    easeInOutSine: function (x, t, b, c, d) {
        return -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;
    },
    easeInExpo: function (x, t, b, c, d) {
        return (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;
    },
    easeOutExpo: function (x, t, b, c, d) {
        return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;
    },
    easeInOutExpo: function (x, t, b, c, d) {
        if (t==0) return b;
        if (t==d) return b+c;
        if ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;
        return c/2 * (-Math.pow(2, -10 * --t) + 2) + b;
    },
    easeInCirc: function (x, t, b, c, d) {
        return -c * (Math.sqrt(1 - (t/=d)*t) - 1) + b;
    },
    easeOutCirc: function (x, t, b, c, d) {
        return c * Math.sqrt(1 - (t=t/d-1)*t) + b;
    },
    easeInOutCirc: function (x, t, b, c, d) {
        if ((t/=d/2) < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;
        return c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;
    },
    easeInElastic: function (x, t, b, c, d) {
        var s=1.70158;var p=0;var a=c;
        if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
        if (a < Math.abs(c)) { a=c; var s=p/4; }
        else var s = p/(2*Math.PI) * Math.asin (c/a);
        return -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
    },
    easeOutElastic: function (x, t, b, c, d) {
        var s=1.70158;var p=0;var a=c;
        if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
        if (a < Math.abs(c)) { a=c; var s=p/4; }
        else var s = p/(2*Math.PI) * Math.asin (c/a);
        return a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;
    },
    easeInOutElastic: function (x, t, b, c, d) {
        var s=1.70158;var p=0;var a=c;
        if (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);
        if (a < Math.abs(c)) { a=c; var s=p/4; }
        else var s = p/(2*Math.PI) * Math.asin (c/a);
        if (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
        return a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;
    },
    easeInBack: function (x, t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        return c*(t/=d)*t*((s+1)*t - s) + b;
    },
    easeOutBack: function (x, t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        return c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;
    },
    easeInOutBack: function (x, t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        if ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;
        return c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;
    },
    easeInBounce: function (x, t, b, c, d) {
        return c - jQuery.easing.easeOutBounce (x, d-t, 0, c, d) + b;
    },
    easeOutBounce: function (x, t, b, c, d) {
        if ((t/=d) < (1/2.75)) {
            return c*(7.5625*t*t) + b;
        } else if (t < (2/2.75)) {
            return c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;
        } else if (t < (2.5/2.75)) {
            return c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;
        } else {
            return c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;
        }
    },
    easeInOutBounce: function (x, t, b, c, d) {
        if (t < d/2) return jQuery.easing.easeInBounce (x, t*2, 0, c, d) * .5 + b;
        return jQuery.easing.easeOutBounce (x, t*2-d, 0, c, d) * .5 + c*.5 + b;
    }
});

/*
 *
 * TERMS OF USE - EASING EQUATIONS
 *
 * Open source under the BSD License.
 *
 * Copyright © 2001 Robert Penner
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list
 * of conditions and the following disclaimer in the documentation and/or other materials
 * provided with the distribution.
 *
 * Neither the name of the author nor the names of contributors may be used to endorse
 * or promote products derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */

/* End */
;
; /* Start:"a:4:{s:4:"full";s:54:"/bitrix/templates/esate_v2/js/esate2.js?14234231524570";s:6:"source";s:39:"/bitrix/templates/esate_v2/js/esate2.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
// JavaScript Document



var fl_topPanelAnimate = false;

function SwapTopPanel()
{
	if(fl_topPanelAnimate)
		return;

	fl_topPanelAnimate = true; 

	$(".des_topBtn").toggleClass("des_changeBtn");

	if(typeof confTopPanelIsOpened != "undefined")
	{
		if(confTopPanelIsOpened)
		{
			$(".des_headerCont").animate({"height":"0px"},300, function() {
				fl_topPanelAnimate = false;
                SetCookie('topPanelClose',1,3600*24*30,'/');
			});
		}
		else
		{
			$(".des_headerCont").animate({"height":"80px"},300, function() {
				fl_topPanelAnimate = false;
                SetCookie('topPanelClose',0,3600*24*30,'/');
			});
		}
	}
	else
	{
		if($(".des_headerCont").height() > 0)
		{

			$(".des_headerCont").animate({"height":"0px"},300, function() {
				fl_topPanelAnimate = false;
                SetCookie('topPanelClose',1,3600*24*30,'/');
			});
		}
		else
		{
			$(".des_headerCont").animate({"height":"80px"},300, function() {
				fl_topPanelAnimate = false;
                SetCookie('topPanelClose',0,3600*24*30,'/');
			});
		}
	}
}

var win;
var advRightBlock;
var tmSetBlock;
var baseHeightTopRight = 0;
var leftScrollElem;

var scrollCheckNow = 0;
var lastWindh = 0;

function SetCookie(name, value, expires, path, domain, secure) {

    var date = null;
    if(expires)
    {
        date = new Date;
        date.setDate( date.getDate() + expires );
    }

    document.cookie = name + "=" + escape(value) +
    ((date) ? "; expires=" + date.toUTCString() : "") +
    ((path) ? "; path=" + path : "") +
    ((domain) ? "; domain=" + domain : "") +
    ((secure) ? "; secure" : "");
}

function ShowScroll()
{
    ($(window).scrollTop() > 150) ? leftScrollElem.fadeIn(300) : leftScrollElem.fadeOut(0);
    scrollCheckNow = 0;

    var curLastWindh = $('body').width();

    if(curLastWindh != lastWindh) {

        lastWindh = curLastWindh;
        if (lastWindh > 1280) {
            if (lastWindh > 1500)
                leftScrollElem.width(60);
            else
                leftScrollElem.width(40);
        }
        else
            leftScrollElem.width(15);

    }
}

function InitScrollLeft()
{
    leftScrollElem = $('#id_scrollLeft');
    leftScrollElem.on('click', function() {
        $("html:not(:animated)" +( !$.browser.opera ? ",body:not(:animated)" : "")).animate({ scrollTop: 0}, 300, function() { leftScrollElem.fadeOut(300); } );
        return false;
    });

    leftScrollElem.on('mouseenter', function() { leftScrollElem.stop().animate({'opacity':0.9},300); });
    leftScrollElem.on('mouseleave', function() { leftScrollElem.stop().animate({'opacity':0.2},300); });

    $(window).scroll( function(){
        if(!scrollCheckNow)
            scrollCheckNow = setTimeout( ShowScroll, 100);
    });

    lastWindh = $('body').width();
    if(lastWindh > 1280) {
        if(lastWindh > 1500)
            leftScrollElem.width(60);
        else
            leftScrollElem.width(40);
    }
    else
        leftScrollElem.width(15);



}

$(document).ready(function () {

    win = $(window);
    advRightBlock = $('#id_rightFloatBlock');
    tmSetBlock = 0;

	$(".des_topBtn").live("click", function() { SwapTopPanel(); });

	if( $('.forum-info-box-inner').length > 0)
		$(".des_submenu_lane").append($('.forum-info-box-inner').first());

    InitScrollLeft();

    if(!scrollCheckNow)
        scrollCheckNow = setTimeout( ShowScroll, 200 );

    /* right block */
    if(advRightBlock.length)
    {
        baseHeightTopRight = advRightBlock.offset().top;
        win.scroll(function() {

            if (st + 10 != at) {

                var st = win.scrollTop();
                var wh = win.height();
                var at = advRightBlock.offset().top;

                clearTimeout(tmSetBlock);
                tmSetBlock = setTimeout(function() {
                    AminateBlock((st+10)-baseHeightTopRight);
                }, 800);
            }
        });
    }

    if(window.screen.height < 1024)
    {
        setTimeout(function() {
            var el = $('.des_topBtn');
                if(!el.hasClass('des_changeBtn'))
                    SwapTopPanel();
        }, 1000);
    }

});

$(window).load(function() {
    //$(document).ready(function() {
        if($('.des_main_right_col').length)
        {
            $('.des_main_right_col').height($('.des_main_content').height());
        }
    //});
});



function AminateBlock(v)
{
    if(v < 0)
        v = 0;

    var st = win.scrollTop();
    var at = advRightBlock.offset().top;

    advRightBlock.animate({'top':v+'px'},300, function() {});
}






/* End */
;
; /* Start:"a:4:{s:4:"full";s:28:"/core/core.js?14234231866503";s:6:"source";s:13:"/core/core.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
var idCountAlertBox = 0;

var errText_errorAjaxRequestPlzReload = 'Произошла ошибка. Пожалуйста, перезагрузите страницу и повторите попытку.';
var errText_errorAjaxRequestUnknown   = 'Произошла неизвестная ошибка. Пожалуйста, перезагрузите страницу.';
var errText_errorAjaxRequestFail      = 'Запрос завершился ошибкой. Пожалуйста, перезагрузите страницу. Если ошибка будет повторяться - обратитесь к администратору сайта.';

function CoreShowOverlay(opacity, loadingIcon) {
	$("body").append('<div id="id-core-overlay" class="core-overlay"></div>');
	$("#id-core-overlay").css("opacity", opacity);

	if (typeof(loadingIcon) != "undefined") {
		if (loadingIcon) {
			$("#id-core-overlay").append('<img src="/bitrix/templates/esate_v2/images/preloadSlider.gif" width="32" height="32" alt="Загрузка..." />');
		}
	}

	$("#id-core-overlay").show();
}


function CoreCloseOverlay() {
	$("#id-core-overlay").remove();
}

function CoreCloseSpOverlay() {
	$(".core-overlay-super").remove();
	if ($("#id_currentArrowActive"))
		$("#id_currentArrowActive").remove();
}

function CoreCloseModal(id) {
	$("#" + id).remove();
	CoreCloseOverlay();
}

function CoreModalLoadingOperation(id) {
	var overlay = $("#" + id).find(".des_loadingOperationModal");
	overlay.width($("#" + id).width());
	overlay.height($("#" + id).height());

	overlay.show();
}


function CoreModalLoadingOperationReady(id) {
	var overlay = $("#" + id).find(".des_loadingOperationModal");
	overlay.fadeOut(500);
}

function TestEmail(email)
{
    var pattEmail = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/; ///^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i;
    return pattEmail.test(email);
}

function CoreModalAlertBox(id, width, height, titleText, messageHTML, buttons, callback, needCloseButton, noNeedOverlay, loadState, loadCallBack) {

	if (!noNeedOverlay)
		CoreShowOverlay("0.7");


	if (titleText == "") {
		titleText = "Внимание!";
	}


	var data = '<div class="core-dialog" id="' + id + '" style="width: ' + width + 'px; height:' + height + '; left: 50%; margin-left: -' + width / 2 + 'px; display: block; z-index:6001; box-shadow: 0 0 35px #fff;">';
	data += '<div class="core-dialog-title">' + titleText + '<a href="javascript:void(0);" id="' + id + '_close" class="core-dialog-close"></a></div><div class="esate-default-dialog">';

	if (needCloseButton)
		data += '<div class="core-dialog-content" id="' + id + '_content" style="display: block;">';

	data += '<div class="des_alertBoxCont">' + messageHTML + '</div>';
	data += '<div class="des_alertBoxButtons">';

	for (var ax = 0; ax < buttons.length; ax++) {
		data += '<a href="javascript:void(0);" class="coreBtnEsate ' + buttons[ax].addClass + '" id="' + buttons[ax].id + '">' + buttons[ax].text + '</a>';
	}

	data += '<div style="clear:both;"></div>';

	data += '</div>';
	data += '</div><div class="core-dialog-loading" style="display: none;"><img src="/bitrix/templates/esate_v2/images/preloadSlider.gif" width="32" height="32" alt="" /></div></div>';
	data += '<div class="des_loadingOperationModal"><img src="/bitrix/templates/esate_v2/images/preloadSlider.gif" width="32" height="32" alt="Загрузка..." /></div>';
	//data += '</div>';

	$("body").append(data);


	var hTop = Math.round($(window).scrollTop() + (($(window).height() - 100) / 2 - $("#" + id).height() / 2));
	$("#" + id).css("top", hTop + "px");

	if (needCloseButton) {
		$("#" + id + "_close").click(function() {
			var _noNeedOverlay = noNeedOverlay;
			if (!callback) {
				$("#" + id).remove();
				if (!_noNeedOverlay)
					CoreCloseOverlay();

			} else {
				if (callback(id, "CLOSE")) {
					$("#" + id).remove();
					if (!_noNeedOverlay)
						CoreCloseOverlay();

				} else {
					CoreModalLoadingOperation(id);
				}
			}
		});
	}



	for (var ax = 0; ax < buttons.length; ax++) {

		(function() {

			var _id = id;
			var _button = buttons[ax];
			var _callback = callback;

			if (!_button.disabled) {
				$("#" + _button.id).click(function() {
					var _noNeedOverlay = noNeedOverlay;
					if (typeof(_button.checkFunction) == "function") {
						if (_button.checkFunction()) {
							if (!_callback) {
								$("#" + _id).remove();

								if (!_noNeedOverlay)
									CoreCloseOverlay();
							} else {
								if (_callback(_id, _button.callBackRespCode)) {
									$("#" + _id).remove();

									if (!_noNeedOverlay)
										CoreCloseOverlay();
								} else {
									CoreModalLoadingOperation(_id);
								}
							}
						} else {
							// функция проверки не пройдена. ничего не делаем
						}
					} else {
						if (!_callback) {
							$("#" + _id).remove();

							if (!_noNeedOverlay)
								CoreCloseOverlay();
						} else {
							if (_callback(_id, _button.callBackRespCode)) {
								$("#" + _id).remove();

								if (!_noNeedOverlay)
									CoreCloseOverlay();

							} else {
								CoreModalLoadingOperation(_id);
							}
						}
					}

				});
			}

		})();

	}



	if(typeof(loadState) != 'undefined')
	{
		if(loadState)
		{
			//id
			$(id+" .core-dialog-loading").show();

		}
		else
		{

		}
	}





}


function ShowMessage(text, callback) {
	var _id = "id_alertBox" + idCountAlertBox;
	idCountAlertBox++;

	var butt = new Array();
	butt[0] = {
		id: _id + "_btn",
		text: "ОК",
		callBackRespCode: "OK",
		addClass: ""
	};

	CoreModalAlertBox(_id, 400, "auto", "", text, butt, callback, true);
}



function strip_tags(input, allowed) {

	allowed = (((allowed || "") + "").toLowerCase().match(/<[a-z][a-z0-9]*>/g) || []).join(''); // making sure the allowed arg is a string containing only tags in lowercase (<a><b><c>)
	var tags = /<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,
		commentsAndPhpTags = /<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;
	return input.replace(commentsAndPhpTags, '').replace(tags, function($0, $1) {
		return allowed.indexOf('<' + $1.toLowerCase() + '>') > -1 ? $0 : '';
	});
}


/* End */
;
; /* Start:"a:4:{s:4:"full";s:29:"/core/auth.js?142843928023759";s:6:"source";s:13:"/core/auth.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/


var cur_authActiveFormPart          = 0;
var cur_passwordResetComplete       = '<span style="color:#188316">Пароль успешно изменен. Вы можете вернуться к авторизации.</span>';
var cur_RegisterComplete            = '<span style="color:#188316">Для завершения регистрации введите код подтверждения, высланный вам на E-mail.</span>';
var cur_RegisterConfirmComplete     = '<span style="color:#188316">Регистрация завершена, вы можете авторизоваться на сайте.</span>';

var ajaxReqNow_auth = {
    'login':false,
    'getpass':false,
    'setpass':false,
    'register':false,
    'register_confirm':false
};

function ReloadCapcha()
{
    $("#id_authFromCaptchaBlock img").fadeOut(300);

    $.getJSON('/core/ajax/.captcha.php', function(data) {
        $("#id_authFromCaptchaBlock img").attr('src','/bitrix/tools/captcha.php?captcha_sid='+data);
        $('#captcha_sid').val(data);
        $("#id_authFromCaptchaBlock img").fadeIn(300);
    });
}


function ShowAuthForm()
{
    if($('#id_authFormOverlay').css('display') == 'block')
    {
        $('#id_authFormOverlay').fadeOut(500);
    }
    else
    {
        $('#id_authFormOverlay').fadeIn(500);
    }
}


function AuthFormInit() // from doc.ready
{
    $("#id_closeAuthForm, #id_closeAuthForm1, #id_closeAuthForm2").on('click', function() {
        $('#id_authFormOverlay').hide();
        ResetFormAuthToBaseState();
    });

    $('#USER_PASSWORD').on('keyup', function(e) {
        if (e.which == 13) {
            $('#id_loginBtnAjax').trigger('click');
            e.preventDefault();
        }
    });

    $('#id_loginBtnAjax').on('click', function(){

        if(ajaxReqNow_auth.login)
            return;

        ajaxReqNow_auth.login = true;

        var widthLoadBtn = $('#id_loginBtnAjax').width();
        $('#id_loginBtnAjax').width(widthLoadBtn).addClass('ds_loading');


        var $this = $('form[name="form_authMainForm"]');
        var $form = { action: $this.attr('action'), post:{} };

        $.each($('input', $this), function(){
            if ($(this).attr('name').length) {
                $form.post[$(this).attr('name')] = $(this).val();
            }
        });

        request = $.post('/core/ajax/.login.php', $form.post, function(data){

            $('#id_loginBtnAjax').width('auto').removeClass('ds_loading');

            if(data.type == 'error') {
                $('#id_errAuth').empty();
                $('#id_errAuth').html(data.message);

                if(data.hasCaptcha)
                {
                    if($('#captcha_sid').length)
                    {
                        ReloadCapcha();

                        if(!$("form[name='form_authMainForm'] .des_l1_left").hasClass("des_errorInput"))
                            $("form[name='form_authMainForm'] .des_l1_left").addClass("des_errorInput");

                        if(!$("form[name='form_authMainForm'] .des_l1_right").hasClass("des_errorInput"))
                            $("form[name='form_authMainForm'] .des_l1_right").addClass("des_errorInput");

                        if(!$("form[name='form_authMainForm'] .des_l2_right").hasClass("des_errorInput"))
                            $("form[name='form_authMainForm'] .des_l2_right").addClass("des_errorInput");
                    }
                    else
                    {
                        $('#id_authForm').animate({'height':'492px'}, 500, function() {
                            $('#id_authForm').removeClass('des_noCaptchaHeight');

                            $('#id_authFromCaptchaBlock').load( "/core/ajax/.captcha-full.php", function() {});

                            if(!$("form[name='form_authMainForm'] .des_l1_left").hasClass("des_errorInput"))
                                $("form[name='form_authMainForm'] .des_l1_left").addClass("des_errorInput");

                            if(!$("form[name='form_authMainForm'] .des_l1_right").hasClass("des_errorInput"))
                                $("form[name='form_authMainForm'] .des_l1_right").addClass("des_errorInput");

                            if(!$("form[name='form_authMainForm'] .des_l2_right").hasClass("des_errorInput"))
                                $("form[name='form_authMainForm'] .des_l2_right").addClass("des_errorInput");

                        })
                    }
                }
                ajaxReqNow_auth.login = false;

            } else {
                if(data.type == 'ok') {

                    ajaxReqNow_auth.login = false;

                    var loc = window.location.href;
                    if (loc.search(/\?exit/) > 0 || loc.search(/\&exit/) > 0)
                        window.location.href = '/';
                    else
                        window.location.reload(true);
                }
                else
                {
                    ajaxReqNow_auth.login = false;

                    $('#id_errAuth').empty();
                    $('#id_errAuth').html(errText_errorAjaxRequestPlzReload);
                }
            }
        }, 'json');

        request.fail(function() {
            $('#id_errAuth').html(errText_errorAjaxRequestFail);
        });

        return false;
    });


    $('#id_resetBtnAjaxSend').on('click', function(){

        var $this = $('form[name="form_authResetPass"]');
        var $form = { action: $this.attr('action'), post:{} };

        if(ajaxReqNow_auth.getpass)
            return;
        ajaxReqNow_auth.getpass = true;

        var widthLoadBtn = $('#id_resetBtnAjaxSend').width();
        $('#id_resetBtnAjaxSend').width(widthLoadBtn).addClass('ds_loading');

        $.each($('input', $this), function(){
            if ($(this).attr('name').length) {
                $form.post[$(this).attr('name')] = $(this).val();
            }
        });

        request = $.post('/core/ajax/.getpass.php', $form.post, function(data){

            $('#id_resetBtnAjaxSend').width('auto').removeClass('ds_loading');

            if(data.type == 'error') {

                $('#id_errAuthReset').empty();
                $('#id_errAuthReset').html(data.message);

                if(!$("form[name='form_authResetPass'] .des_l1_left").hasClass("des_errorInput"))
                    $("form[name='form_authResetPass'] .des_l1_left").addClass("des_errorInput");

                if(!$("form[name='form_authResetPass'] .des_l1_right").hasClass("des_errorInput"))
                    $("form[name='form_authResetPass'] .des_l1_right").addClass("des_errorInput");

                if(!$("form[name='form_authResetPass'] .des_l2_right").hasClass("des_errorInput"))
                    $("form[name='form_authResetPass'] .des_l2_right").addClass("des_errorInput");

                ajaxReqNow_auth.getpass = false;

            } else {

                if(data.type == 'auth')
                {
                    ajaxReqNow_auth.getpass = false;

                    var loc = window.location.href;
                    if(loc.search(/\?exit/) > 0 || loc.search(/\&exit/) > 0)
                        window.location.href = '/';
                    else
                        window.location.reload(true);
                }
                else
                {
                    if(data.type = 'ok') {
                        ajaxReqNow_auth.getpass = false;
                        EnterCode();
                    }
                    else
                    {
                        ajaxReqNow_auth.getpass = false;
                        $('#id_errAuthReset').empty();
                        $('#id_errAuthReset').html(data.message);

                        if(!$("form[name='form_authResetPass'] .des_l1_left").hasClass("des_errorInput"))
                            $("form[name='form_authResetPass'] .des_l1_left").addClass("des_errorInput");

                        if(!$("form[name='form_authResetPass'] .des_l1_right").hasClass("des_errorInput"))
                            $("form[name='form_authResetPass'] .des_l1_right").addClass("des_errorInput");

                        if(!$("form[name='form_authResetPass'] .des_l2_right").hasClass("des_errorInput"))
                            $("form[name='form_authResetPass'] .des_l2_right").addClass("des_errorInput");
                    }
                }
            }
        }, 'json');

        request.fail(function() {
            $('#id_errAuthReset').html(errText_errorAjaxRequestFail);
        });

        return false;
    });

    $('#id_resetBtnAjaxEnter').on('click', EnterCode);
    $('#id_resetBtnAjaxReSend').on('click', GetCode);
}



function Register()
{
    if(ajaxReqNow_auth.register)
        return;

    $('#id_errAuthReg').empty();

    var login = $('input[name="USER_REG_LOGIN_loc"]').val();
    var email = $('input[name="USER_REG_EMAIL_loc"]').val();
    var pass1 = $('input[name="USER_REG_PASSWORD_loc"]').val();
    var pass2 = $('input[name="USER_REG_CONFIRM_PASSWORD_loc"]').val();

    $('form[name="form_authRegUser"]').find('input').removeClass('des_errorInputElem');

    var error = false;

    if(login.length <= 3 || login.length > 32)
    {
        error = true;
        if(login.length > 32)
            $('#id_errAuthReg').text('Логин должен быть меньше 32-х символов. ');
        else
            $('#id_errAuthReg').text('Логин должен быть больше 3-х символов. ');

        $('input[name="USER_REG_LOGIN_loc"]').addClass('des_errorInputElem');
    }

    if(!TestEmail(email))
    {
        error = true;
        var oldHtml = $('#id_errAuthReg').text();
        $('#id_errAuthReg').text(oldHtml+'Введите корректный E-mail. ');
        $('input[name="USER_REG_EMAIL_loc"]').addClass('des_errorInputElem');
    }

    if(pass1.length == 0 || pass2.length == 0)
    {
        error = true;
        var oldHtml = $('#id_errAuthReg').text();
        $('#id_errAuthReg').text(oldHtml+'Пароль или подтверждение пароля должны быть указаны. ');
        $('input[name="USER_REG_PASSWORD_loc"]').addClass('des_errorInputElem');
        $('input[name="USER_REG_CONFIRM_PASSWORD_loc"]').addClass('des_errorInputElem');
    }
    else
    {
        if(pass1 != pass2)
        {
            error = true;
            var oldHtml = $('#id_errAuthReg').text();
            $('#id_errAuthReg').text(oldHtml+'Пароли не совпадают. ');
            $('input[name="USER_REG_CONFIRM_PASSWORD_loc"]').addClass('des_errorInputElem');
        }
    }

    if(!error)
        RegisterAjax();
}

function RegisterAjax()
{
    if(ajaxReqNow_auth.register)
        return;

    ajaxReqNow_auth.register = true;

    var widthLoadBtn = $('#id_regBtnAjax').width();
    $('#id_regBtnAjax').width(widthLoadBtn).addClass('ds_loading');

    var $this = $('form[name="form_authRegUser"]');
    var $form = { action: $this.attr('action'), post:{} };


    $('form[name="form_authRegUser"]').find('input').removeClass('des_errorInputElem');

    $.each($('input', $this), function(){
        if ($(this).attr('name').length) {
            $form.post[$(this).attr('name')] = $(this).val();
        }
    });

    var request = $.post('/core/ajax/.reg.php', $form.post, function(data){

        $('#id_regBtnAjax').width('auto').removeClass('ds_loading');

        if(data.type == 'error') {

            ajaxReqNow_auth.register = false;

            $('#id_errAuthReg').empty();
            $('#id_errAuthReg').html(data.message);

            $('form[name="form_authRegUser"]').find('input').addClass('des_errorInputElem');

        } else {

            if(data.type == 'auth')
            {
                ajaxReqNow_auth.register = false;

                var loc = window.location.href;
                if(loc.search(/\?exit/) > 0 || loc.search(/\&exit/) > 0)
                    window.location.href = '/';
                else
                    window.location.reload(true);
            }
            else
            {
                if(data.type = 'ok') {
                    ajaxReqNow_auth.register = false;
                    $('#id_errAuthReg').empty();
                    $('#id_errAuthReg').html(cur_RegisterComplete);

                    ShowConfirmRegCode();
                }
                else
                {
                    ajaxReqNow_auth.register = false;

                    $('#id_errAuthReg').empty();

                    if(data.message.length == 0)
                        data.message = errText_errorAjaxRequestUnknown;

                    if(data.message.length > 50)
                    {
                        $('#id_authReg').animate( {'height':'405px'}, 300);
                    }
                    else
                    {
                        $('#id_authReg').animate( {'height':'360px'}, 300);
                    }

                    $('#id_errAuthReg').html(data.message);

                    $('form[name="form_authRegUser"]').find('input').addClass('des_errorInputElem');
                }
            }
        }
    }, 'json');

    request.fail(function() {
        //$('#id_regBtnAjax').width('auto').removeClass('ds_loading');
        $('#id_errAuthReg').html(errText_errorAjaxRequestFail);
    });

    return false;
}

function RegisterConfirm()
{
    if(ajaxReqNow_auth.register_confirm)
        return;

    ajaxReqNow_auth.register_confirm = true;

    var widthLoadBtn = $('#id_regBtnConfirmAjax').width();
    $('#id_regBtnConfirmAjax').width(widthLoadBtn).addClass('ds_loading');

    var $this = $('form[name="form_authRegUserConfirm"]');
    var $form = { action: $this.attr('action'), post:{} };

    $('form[name="form_authRegUserConfirm"]').find('input').removeClass('des_errorInputElem');

    $.each($('input', $this), function() {
        if ($(this).attr('name').length) {
            $form.post[$(this).attr('name')] = $(this).val();
        }
    });

    var request = $.post('/core/ajax/.regconf.php', $form.post, function(data){

        $('#id_regBtnConfirmAjax').width('auto').removeClass('ds_loading');

        if(data.type == 'error') {

            ajaxReqNow_auth.register_confirm = false;

            $('#id_errAuthRegConf').empty();
            $('#id_errAuthRegConf').html(data.message);

            $('form[name="form_authRegUserConfirm"]').find('input').addClass('des_errorInputElem');

        } else {

            if(data.type == 'auth')
            {
                ajaxReqNow_auth.register_confirm = false;

                var loc = window.location.href;
                if(loc.search(/\?exit/) > 0 || loc.search(/\&exit/) > 0)
                    window.location.href = '/';
                else
                    window.location.reload(true);
            }
            else
            {
                if(data.type = 'ok') {
                    ajaxReqNow_auth.register_confirm = false;
                    $('#id_errAuthRegConf').empty();
                    $('#id_errAuthRegConf').html(cur_RegisterConfirmComplete);

                    $('#id_errAuth').html(cur_RegisterConfirmComplete);
                    $('#USER_LOGIN').val($form.post.USER_REG_LOGIN_CONF_loc);
                    SetFormPartAuth();

                    //EnterConfirmRegCode();
                }
                else
                {
                    ajaxReqNow_auth.register_confirm = false;

                    $('#id_errAuthRegConf').empty();

                    if(data.message.length == 0)
                        data.message = errText_errorAjaxRequestUnknown;

                    $('#id_errAuthRegConf').html(data.message);

                    $('form[name="form_authRegUserConfirm"]').find('input').addClass('des_errorInputElem');
                }
            }
        }
    }, 'json');

    request.fail(function() {
        //$('#id_regBtnAjax').width('auto').removeClass('ds_loading');
        $('#id_errAuthRegConf').html(errText_errorAjaxRequestFail);
    });

    return false;
}


function ShowConfirmRegCode()
{
    $('form[name="form_authRegUser"]').fadeOut(300, function() {
        $('#id_authReg').animate( {'height':'315px'}, 300, function() {

            $('form[name="form_authRegUserConfirm"]').fadeIn(300);

            var email = $('#USER_REG_LOGIN_loc').val();
            if(email.length)
                $('#USER_REG_LOGIN_CONF_loc').val(email);
        })
    });
}

function ShowRegFormFromConfirm()
{
    $('form[name="form_authRegUserConfirm"]').fadeOut(300, function() {
        $('#id_authReg').animate( {'height':'380px'}, 300, function() {
            $('form[name="form_authRegUser"]').fadeIn(300);
        })
    });
}

function ResetPasswordAjax()
{
    var $this = $('form[name="form_authResetPassSet"]');
    var $form = { action: $this.attr('action'), post:{} };

    if(ajaxReqNow_auth.setpass)
        return;
    ajaxReqNow_auth.setpass = true;

    var widthLoadBtn = $('#id_resetBtnAjax').width();
    $('#id_resetBtnAjax').width(widthLoadBtn).addClass('ds_loading');


    $('form[name="form_authResetPassSet"]').find('input').removeClass('des_errorInputElem');

    $.each($('input', $this), function(){
        if ($(this).attr('name').length) {
            $form.post[$(this).attr('name')] = $(this).val();
        }
    });

    var request = $.post('/core/ajax/.setpass.php', $form.post, function(data){

        $('#id_resetBtnAjax').width('auto').removeClass('ds_loading');

        if(data.type == 'error') {

            ajaxReqNow_auth.setpass = false;

            $('#id_errAuthResetSet').empty();
            $('#id_errAuthResetSet').html(data.message);

            $('form[name="form_authResetPassSet"]').find('input').addClass('des_errorInputElem');

        } else {

            if(data.type == 'auth')
            {
                ajaxReqNow_auth.setpass = false;

                var loc = window.location.href;
                if(loc.search(/\?exit/) > 0 || loc.search(/\&exit/) > 0)
                    window.location.href = '/';
                else
                    window.location.reload(true);
            }
            else
            {
                if(data.type = 'ok') {
                    ajaxReqNow_auth.setpass = false;
                    $('#id_errAuthResetSet').empty();
                    $('#id_errAuthResetSet').html(cur_passwordResetComplete);
                }
                else
                {
                    ajaxReqNow_auth.setpass = false;

                    $('#id_errAuthResetSet').empty();

                    if(data.message.length == 0)
                        data.message = errText_errorAjaxRequestUnknown;

                    $('#id_errAuthResetSet').html(data.message);

                    $('form[name="form_authResetPassSet"]').find('input').addClass('des_errorInputElem');
                }
            }
        }
    }, 'json');

    request.fail(function() {
        //$('#id_regBtnAjax').width('auto').removeClass('ds_loading');
        $('#id_errAuthResetSet').html(errText_errorAjaxRequestFail);
    });

    return false;
}


function SetFormPartAuth()
{
    ClearErrorClass();
    var from = '';
    if(cur_authActiveFormPart == 1)
        from = '#id_authReg';
    else
        from = '#id_authReset'; // 2

    $(from).fadeOut(500, function() {
        $('#id_authForm').fadeIn(500, function () {
            cur_authActiveFormPart = 0;
        });
    });
}

function RegInit()
{
    ClearErrorClass();
    var from = '';
    if(cur_authActiveFormPart == 0)
        from = '#id_authForm';
    else
        from = '#id_authReset'; // 2

    $(from).fadeOut(500, function() {
        $('#id_authReg').fadeIn(500, function () {
            cur_authActiveFormPart = 1;
        });
    });
}

function ResetPass()
{
    ClearErrorClass();
    var from = '';
    if(cur_authActiveFormPart == 0)
        from = '#id_authForm';
    else
        from = '#id_authReg';

    $(from).fadeOut(500, function() {
        $('#id_authReset').fadeIn(500, function () {
            cur_authActiveFormPart = 2;
        });
    });
}

function OpenFromRegInit()
{
    $('#id_authForm').hide();
    $('#id_authReg').show();
    cur_authActiveFormPart = 1;
    ShowAuthForm();
}

function ClearErrorClass()
{
    $(".des_l1_left").removeClass("des_errorInput");
    $(".des_l1_right").removeClass("des_errorInput");
    $(".des_l2_right").removeClass("des_errorInput");
}

function ResetFormAuthToBaseState()
{
    ClearErrorClass();
    $('#id_authReg').hide();
    $('#id_authReset').hide();
    $('#id_authForm').show();
    cur_authActiveFormPart = 0;
}

function EnterCode()
{
    $('form[name="form_authResetPass"]').fadeOut(300, function() {
        $('#id_authReset').animate( {'height':'390px'}, 300, function() {
            $('form[name="form_authResetPassSet"]').fadeIn(300);
        })
    });
}

function GetCode()
{
    $('form[name="form_authResetPassSet"]').fadeOut(300, function() {
        $('#id_authReset').animate( {'height':'325px'}, 300, function() {
            $('form[name="form_authResetPass"]').fadeIn(300);
        })
    });
}

function UpdatePassword()
{
    if(ajaxReqNow_auth.setpass)
        return;

    $('#id_errAuthResetSet').empty();

    var login = $('input[name="USER_LOGIN_loc"]').val();
    var code  = $('input[name="USER_CHECKWORD_loc"]').val();
    var pass1 = $('input[name="USER_PASSWORD_loc"]').val();
    var pass2 = $('input[name="USER_CONFIRM_PASSWORD_loc"]').val();

    $('form[name="form_authResetPassSet"]').find('input').removeClass('des_errorInputElem');

    var error = false;

    if(login.length <= 3)
    {
        error = true;
        $('#id_errAuthResetSet').text('Логин должен быть больше 3-х символов. ');
        $('input[name="USER_LOGIN_loc"]').addClass('des_errorInputElem');
    }

    if(code.length != 32)
    {
        error = true;
        var oldHtml = $('#id_errAuthResetSet').text();
        $('#id_errAuthResetSet').text(oldHtml+'Введите код подтверждения. ');
        $('input[name="USER_CHECKWORD_loc"]').addClass('des_errorInputElem');
    }

    if(pass1.length == 0 || pass2.length == 0)
    {
        error = true;
        var oldHtml = $('#id_errAuthResetSet').text();
        $('#id_errAuthResetSet').text(oldHtml+'Пароль или подтверждение пароля должны быть указаны. ');
        $('input[name="USER_PASSWORD_loc"]').addClass('des_errorInputElem');
        $('input[name="USER_CONFIRM_PASSWORD_loc"]').addClass('des_errorInputElem');
    }
    else
    {
        if(pass1 != pass2)
        {
            error = true;
            var oldHtml = $('#id_errAuthResetSet').text();
            $('#id_errAuthResetSet').text(oldHtml+'Пароли не совпадают. ');
            $('input[name="USER_CONFIRM_PASSWORD_loc"]').addClass('des_errorInputElem');
        }
    }

    if(!error)
        ResetPasswordAjax();
}
/* End */
;
; /* Start:"a:4:{s:4:"full";s:54:"/bitrix/templates/esate_v2/js/prism.js?142342315220411";s:6:"source";s:38:"/bitrix/templates/esate_v2/js/prism.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
/* http://prismjs.com/download.html?themes=prism&languages=markup+css+clike+javascript+java+php+c+cpp+http+csharp+objectivec&plugins=line-highlight+line-numbers+autolinker+wpd+show-language */
self=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{};var Prism=function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{encode:function(e){return e instanceof n?new n(e.type,t.util.encode(e.content),e.alias):t.util.type(e)==="Array"?e.map(t.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case"Object":var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=t.util.clone(e[i]));return r;case"Array":return e.slice()}return e}},languages:{extend:function(e,n){var r=t.util.clone(t.languages[e]);for(var i in n)r[i]=n[i];return r},insertBefore:function(e,n,r,i){i=i||t.languages;var s=i[e];if(arguments.length==2){r=arguments[1];for(var o in r)r.hasOwnProperty(o)&&(s[o]=r[o]);return s}var u={};for(var a in s)if(s.hasOwnProperty(a)){if(a==n)for(var o in r)r.hasOwnProperty(o)&&(u[o]=r[o]);u[a]=s[a]}t.languages.DFS(t.languages,function(t,n){n===i[e]&&t!=e&&(this[t]=u)});return i[e]=u},DFS:function(e,n,r){for(var i in e)if(e.hasOwnProperty(i)){n.call(e,i,e[i],r||i);t.util.type(e[i])==="Object"?t.languages.DFS(e[i],n):t.util.type(e[i])==="Array"&&t.languages.DFS(e[i],n,i)}}},highlightAll:function(e,n){var r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code');for(var i=0,s;s=r[i++];)t.highlightElement(s,e===!0,n)},highlightElement:function(r,i,s){var o,u,a=r;while(a&&!e.test(a.className))a=a.parentNode;if(a){o=(a.className.match(e)||[,""])[1];u=t.languages[o]}if(!u)return;r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+o;a=r.parentNode;/pre/i.test(a.nodeName)&&(a.className=a.className.replace(e,"").replace(/\s+/g," ")+" language-"+o);var f=r.textContent;if(!f)return;var l={element:r,language:o,grammar:u,code:f};t.hooks.run("before-highlight",l);if(i&&self.Worker){var c=new Worker(t.filename);c.onmessage=function(e){l.highlightedCode=n.stringify(JSON.parse(e.data),o);t.hooks.run("before-insert",l);l.element.innerHTML=l.highlightedCode;s&&s.call(l.element);t.hooks.run("after-highlight",l)};c.postMessage(JSON.stringify({language:l.language,code:l.code}))}else{l.highlightedCode=t.highlight(l.code,l.grammar,l.language);t.hooks.run("before-insert",l);l.element.innerHTML=l.highlightedCode;s&&s.call(r);t.hooks.run("after-highlight",l)}},highlight:function(e,r,i){var s=t.tokenize(e,r);return n.stringify(t.util.encode(s),i)},tokenize:function(e,n,r){var i=t.Token,s=[e],o=n.rest;if(o){for(var u in o)n[u]=o[u];delete n.rest}e:for(var u in n){if(!n.hasOwnProperty(u)||!n[u])continue;var a=n[u];a=t.util.type(a)==="Array"?a:[a];for(var f=0;f<a.length;++f){var l=a[f],c=l.inside,h=!!l.lookbehind,p=0,d=l.alias;l=l.pattern||l;for(var v=0;v<s.length;v++){var m=s[v];if(s.length>e.length)break e;if(m instanceof i)continue;l.lastIndex=0;var g=l.exec(m);if(g){h&&(p=g[1].length);var y=g.index-1+p,g=g[0].slice(p),b=g.length,w=y+b,E=m.slice(0,y+1),S=m.slice(w+1),x=[v,1];E&&x.push(E);var T=new i(u,c?t.tokenize(g,c):g,d);x.push(T);S&&x.push(S);Array.prototype.splice.apply(s,x)}}}}return s},hooks:{all:{},add:function(e,n){var r=t.hooks.all;r[e]=r[e]||[];r[e].push(n)},run:function(e,n){var r=t.hooks.all[e];if(!r||!r.length)return;for(var i=0,s;s=r[i++];)s(n)}}},n=t.Token=function(e,t,n){this.type=e;this.content=t;this.alias=n};n.stringify=function(e,r,i){if(typeof e=="string")return e;if(Object.prototype.toString.call(e)=="[object Array]")return e.map(function(t){return n.stringify(t,r,e)}).join("");var s={type:e.type,content:n.stringify(e.content,r,i),tag:"span",classes:["token",e.type],attributes:{},language:r,parent:i};s.type=="comment"&&(s.attributes.spellcheck="true");if(e.alias){var o=t.util.type(e.alias)==="Array"?e.alias:[e.alias];Array.prototype.push.apply(s.classes,o)}t.hooks.run("wrap",s);var u="";for(var a in s.attributes)u+=a+'="'+(s.attributes[a]||"")+'"';return"<"+s.tag+' class="'+s.classes.join(" ")+'" '+u+">"+s.content+"</"+s.tag+">"};if(!self.document){if(!self.addEventListener)return self.Prism;self.addEventListener("message",function(e){var n=JSON.parse(e.data),r=n.language,i=n.code;self.postMessage(JSON.stringify(t.util.encode(t.tokenize(i,t.languages[r]))));self.close()},!1);return self.Prism}var r=document.getElementsByTagName("script");r=r[r.length-1];if(r){t.filename=r.src;document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll)}return self.Prism}();typeof module!="undefined"&&module.exports&&(module.exports=Prism);;
Prism.languages.markup={comment:/<!--[\w\W]*?-->/g,prolog:/<\?.+?\?>/,doctype:/<!DOCTYPE.+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|[^\s'">=]+))?\s*)*\/?>/gi,inside:{tag:{pattern:/^<\/?[\w:-]+/i,inside:{punctuation:/^<\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|>|"/g}},punctuation:/\/?>/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/\&#?[\da-z]{1,8};/gi},Prism.hooks.add("wrap",function(t){"entity"===t.type&&(t.attributes.title=t.content.replace(/&amp;/,"&"))});;
Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*{))/gi,inside:{punctuation:/[;:]/g}},url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\};]*(?=\s*\{)/g,property:/(\b|\B)[\w-]+(?=\s*:)/gi,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,punctuation:/[\{\};:]/g,"function":/[-a-z0-9]+(?=\()/gi},Prism.languages.markup&&(Prism.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/gi,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css},alias:"language-css"}}),Prism.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').+?\1/gi,inside:{"attr-name":{pattern:/^\s*style/gi,inside:Prism.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/gi,inside:Prism.languages.css}},alias:"language-css"}},Prism.languages.markup.tag));;
Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//g,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*?(\r?\n|$)/g,lookbehind:!0}],string:/("|')(\\?.)*?\1/g,"class-name":{pattern:/((?:(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/gi,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,"function":{pattern:/[a-z0-9_]+\(/gi,inside:{punctuation:/\(/}},number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,operator:/[-+]{1,2}|!|<=?|>=?|={1,3}|&{1,2}|\|?\||\?|\*|\/|\~|\^|\%/g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g};;
Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|function|get|if|implements|import|in|instanceof|interface|let|new|null|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?|NaN|-?Infinity)\b/g}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/gi,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript},alias:"language-javascript"}});;
Prism.languages.java=Prism.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/g,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+[e]?[\d]*[df]\b|\W\d*\.?\d+\b/gi,operator:{pattern:/(^|[^\.])(?:\+=|\+\+?|-=|--?|!=?|<{1,2}=?|>{1,3}=?|==?|&=|&&?|\|=|\|\|?|\?|\*=?|\/=?|%=?|\^=?|:|~)/gm,lookbehind:!0}});;
Prism.languages.php=Prism.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/gi,constant:/\b[A-Z0-9_]{2,}\b/g,comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|(^|[^:])(\/\/|#).*?(\r?\n|$))/g,lookbehind:!0}}),Prism.languages.insertBefore("php","keyword",{delimiter:/(\?>|<\?php|<\?)/gi,variable:/(\$\w+)\b/gi,"package":{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/g,lookbehind:!0,inside:{punctuation:/\\/}}}),Prism.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/g,lookbehind:!0}}),Prism.languages.markup&&(Prism.hooks.add("before-highlight",function(e){"php"===e.language&&(e.tokenStack=[],e.backupCode=e.code,e.code=e.code.replace(/(?:<\?php|<\?)[\w\W]*?(?:\?>)/gi,function(n){return e.tokenStack.push(n),"{{{PHP"+e.tokenStack.length+"}}}"}))}),Prism.hooks.add("before-insert",function(e){"php"===e.language&&(e.code=e.backupCode,delete e.backupCode)}),Prism.hooks.add("after-highlight",function(e){if("php"===e.language){for(var n,a=0;n=e.tokenStack[a];a++)e.highlightedCode=e.highlightedCode.replace("{{{PHP"+(a+1)+"}}}",Prism.highlight(n,e.grammar,"php"));e.element.innerHTML=e.highlightedCode}}),Prism.hooks.add("wrap",function(e){"php"===e.language&&"markup"===e.type&&(e.content=e.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>'))}),Prism.languages.insertBefore("php","comment",{markup:{pattern:/<[^?]\/?(.*?)>/g,inside:Prism.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/g}));;
Prism.languages.c=Prism.languages.extend("clike",{string:/("|')([^\n\\\1]|\\.|\\\r*\n)*?\1/g,keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/g,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\//g}),Prism.languages.insertBefore("c","string",{property:{pattern:/((^|\n)\s*)#\s*[a-z]+([^\n\\]|\\.|\\\r*\n)*/gi,lookbehind:!0,inside:{string:{pattern:/(#\s*include\s*)(<.+?>|("|')(\\?.)+?\3)/g,lookbehind:!0}}}}),delete Prism.languages.c["class-name"],delete Prism.languages.c["boolean"];;
Prism.languages.cpp=Prism.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|delete\[\]|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|new\[\]|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/g,"boolean":/\b(true|false)\b/g,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/g}),Prism.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)[a-z0-9_]+/gi,lookbehind:!0}});;
Prism.languages.http={"request-line":{pattern:/^(POST|GET|PUT|DELETE|OPTIONS|PATCH|TRACE|CONNECT)\b\shttps?:\/\/\S+\sHTTP\/[0-9.]+/g,inside:{property:/^\b(POST|GET|PUT|DELETE|OPTIONS|PATCH|TRACE|CONNECT)\b/g,"attr-name":/:\w+/g}},"response-status":{pattern:/^HTTP\/1.[01] [0-9]+.*/g,inside:{property:/[0-9]+[A-Z\s-]+$/ig}},keyword:/^[\w-]+:(?=.+)/gm};var httpLanguages={"application/json":Prism.languages.javascript,"application/xml":Prism.languages.markup,"text/xml":Prism.languages.markup,"text/html":Prism.languages.markup};for(var contentType in httpLanguages)if(httpLanguages[contentType]){var options={};options[contentType]={pattern:new RegExp("(content-type:\\s*"+contentType+"[\\w\\W]*?)\\n\\n[\\w\\W]*","gi"),lookbehind:!0,inside:{rest:httpLanguages[contentType]}};Prism.languages.insertBefore("http","keyword",options)};;
Prism.languages.csharp=Prism.languages.extend("clike",{keyword:/\b(abstract|as|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/g,string:/@?("|')(\\?.)*?\1/g,preprocessor:/^\s*#.*/gm,number:/\b-?(0x)?\d*\.?\d+\b/g});;
Prism.languages.objectivec=Prism.languages.extend("c",{keyword:/(\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while|in|self|super)\b)|((?=[\w|@])(@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b)/g,string:/(?:("|')([^\n\\\1]|\\.|\\\r*\n)*?\1)|(@"([^\n\\"]|\\.|\\\r*\n)*?")/g,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\/|@/g});;
!function(){function e(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}function t(e,t){return t=" "+t+" ",(" "+e.className+" ").replace(/[\n\t]/g," ").indexOf(t)>-1}function n(e,n,r){for(var i,a=n.replace(/\s+/g,"").split(","),l=+e.getAttribute("data-line-offset")||0,o=parseFloat(getComputedStyle(e).lineHeight),d=0;i=a[d++];){i=i.split("-");var c=+i[0],h=+i[1]||c,s=document.createElement("div");s.textContent=Array(h-c+2).join(" \r\n"),s.className=(r||"")+" line-highlight",t(e,"line-numbers")||(s.setAttribute("data-start",c),h>c&&s.setAttribute("data-end",h)),s.style.top=(c-l-1)*o+"px",t(e,"line-numbers")?e.appendChild(s):(e.querySelector("code")||e).appendChild(s)}}function r(){var t=location.hash.slice(1);e(".temporary.line-highlight").forEach(function(e){e.parentNode.removeChild(e)});var r=(t.match(/\.([\d,-]+)$/)||[,""])[1];if(r&&!document.getElementById(t)){var i=t.slice(0,t.lastIndexOf(".")),a=document.getElementById(i);a&&(a.hasAttribute("data-line")||a.setAttribute("data-line",""),n(a,r,"temporary "),document.querySelector(".temporary.line-highlight").scrollIntoView())}}if(window.Prism){var i=(crlf=/\r?\n|\r/g,0);Prism.hooks.add("after-highlight",function(t){var a=t.element.parentNode,l=a&&a.getAttribute("data-line");a&&l&&/pre/i.test(a.nodeName)&&(clearTimeout(i),e(".line-highlight",a).forEach(function(e){e.parentNode.removeChild(e)}),n(a,l),i=setTimeout(r,1))}),addEventListener("hashchange",r)}}();;
Prism.hooks.add("after-highlight",function(e){var n=e.element.parentNode;if(n&&/pre/i.test(n.nodeName)&&-1!==n.className.indexOf("line-numbers")){var t,a=1+e.code.split("\n").length;lines=new Array(a),lines=lines.join("<span></span>"),t=document.createElement("span"),t.className="line-numbers-rows",t.innerHTML=lines,n.hasAttribute("data-start")&&(n.style.counterReset="linenumber "+(parseInt(n.getAttribute("data-start"),10)-1)),e.element.appendChild(t)}});;
(function(){if(!self.Prism)return;var e=/\b([a-z]{3,7}:\/\/|tel:)[\w-+%~/.:#=?&amp;]+/,t=/\b\S+@[\w.]+[a-z]{2}/,n=/\[([^\]]+)]\(([^)]+)\)/,r=["comment","url","attr-value","string"];for(var i in Prism.languages){var s=Prism.languages[i];Prism.languages.DFS(s,function(i,s,o){if(r.indexOf(o)>-1&&Prism.util.type(s)!=="Array"){s.pattern||(s=this[i]={pattern:s});s.inside=s.inside||{};o=="comment"&&(s.inside["md-link"]=n);o=="attr-value"?Prism.languages.insertBefore("inside","punctuation",{"url-link":e},s):s.inside["url-link"]=e;s.inside["email-link"]=t}});s["url-link"]=e;s["email-link"]=t}Prism.hooks.add("wrap",function(e){if(/-link$/.test(e.type)){e.tag="a";var t=e.content;if(e.type=="email-link"&&t.indexOf("mailto:")!=0)t="mailto:"+t;else if(e.type=="md-link"){var r=e.content.match(n);t=r[2];e.content=r[1]}e.attributes.href=t}})})();;
!function(){function e(e){var a=e.toLowerCase();if(t.HTML[a])return"html";if(t.SVG[e])return"svg";if(t.MathML[e])return"mathml";if(0!==t.HTML[a]){var n=(document.createElement(e).toString().match(/\[object HTML(.+)Element\]/)||[])[1];if(n&&"Unknown"!=n)return t.HTML[a]=1,"html"}if(t.HTML[a]=0,0!==t.SVG[e]){var r=(document.createElementNS("http://www.w3.org/2000/svg",e).toString().match(/\[object SVG(.+)Element\]/)||[])[1];if(r&&"Unknown"!=r)return t.SVG[e]=1,"svg"}return t.SVG[e]=0,0!==t.MathML[e]&&0===e.indexOf("m")?(t.MathML[e]=1,"mathml"):(t.MathML[e]=0,null)}if(self.Prism){if(Prism.languages.css&&(Prism.languages.css.atrule.inside["atrule-id"]=/^@[\w-]+/,Prism.languages.css.selector.pattern?(Prism.languages.css.selector.inside["pseudo-class"]=/:[\w-]+/,Prism.languages.css.selector.inside["pseudo-element"]=/::[\w-]+/):Prism.languages.css.selector={pattern:Prism.languages.css.selector,inside:{"pseudo-class":/:[\w-]+/,"pseudo-element":/::[\w-]+/}}),Prism.languages.markup){Prism.languages.markup.tag.inside.tag.inside["tag-id"]=/[\w-]+/;var t={HTML:{a:1,abbr:1,acronym:1,b:1,basefont:1,bdo:1,big:1,blink:1,cite:1,code:1,dfn:1,em:1,kbd:1,i:1,rp:1,rt:1,ruby:1,s:1,samp:1,small:1,spacer:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1,wbr:1,noframes:1,summary:1,command:1,dt:1,dd:1,figure:1,figcaption:1,center:1,section:1,nav:1,article:1,aside:1,hgroup:1,header:1,footer:1,address:1,noscript:1,isIndex:1,main:1,mark:1,marquee:1,meter:1,menu:1},SVG:{animateColor:1,animateMotion:1,animateTransform:1,glyph:1,feBlend:1,feColorMatrix:1,feComponentTransfer:1,feFuncR:1,feFuncG:1,feFuncB:1,feFuncA:1,feComposite:1,feConvolveMatrix:1,feDiffuseLighting:1,feDisplacementMap:1,feFlood:1,feGaussianBlur:1,feImage:1,feMerge:1,feMergeNode:1,feMorphology:1,feOffset:1,feSpecularLighting:1,feTile:1,feTurbulence:1,feDistantLight:1,fePointLight:1,feSpotLight:1,linearGradient:1,radialGradient:1,altGlyph:1,textPath:1,tref:1,altglyph:1,textpath:1,tref:1,altglyphdef:1,altglyphitem:1,clipPath:1,"color-profile":1,cursor:1,"font-face":1,"font-face-format":1,"font-face-name":1,"font-face-src":1,"font-face-uri":1,foreignObject:1,glyph:1,glyphRef:1,hkern:1,vkern:1},MathML:{}}}var a;Prism.hooks.add("wrap",function(t){if((["tag-id"].indexOf(t.type)>-1||"property"==t.type&&0!=t.content.indexOf("-")||"atrule-id"==t.type&&0!=t.content.indexOf("@-")||"pseudo-class"==t.type&&0!=t.content.indexOf(":-")||"pseudo-element"==t.type&&0!=t.content.indexOf("::-")||"attr-name"==t.type&&0!=t.content.indexOf("data-"))&&-1===t.content.indexOf("<")){var n="w/index.php?fulltext&search=";t.tag="a";var r="http://docs.webplatform.org/";"css"==t.language?(r+="wiki/css/","property"==t.type?r+="properties/":"atrule-id"==t.type?r+="atrules/":"pseudo-class"==t.type?r+="selectors/pseudo-classes/":"pseudo-element"==t.type&&(r+="selectors/pseudo-elements/")):"markup"==t.language&&("tag-id"==t.type?(a=e(t.content)||a,r+=a?"wiki/"+a+"/elements/":n):"attr-name"==t.type&&(r+=a?"wiki/"+a+"/attributes/":n)),r+=t.content,t.attributes.href=r,t.attributes.target="_blank"}})}}();;
!function(){if(self.Prism){var a={csharp:"C#",cpp:"C++"};Prism.hooks.add("before-highlight",function(e){var t=a[e.language]||e.language;e.element.setAttribute("data-language",t)})}}();;
/* End */
;
; /* Start:"a:4:{s:4:"full";s:108:"/bitrix/templates/.default/components/bitrix/search.suggest.input/seacrh_form_main/script.js?142342315112644";s:6:"source";s:92:"/bitrix/templates/.default/components/bitrix/search.suggest.input/seacrh_form_main/script.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
if (typeof oObject != "object")
	window.oObject = {};

function JsSuggest(oHandler, sParams, sParser)
{
	var
		t = this,
		tmp = 0;

	t.oObj = oHandler;
	t.sParams = sParams;
	// Arrays for data
	if (sParser)
	{
		t.sExp = new RegExp("["+sParser+"]+", "i");
	}
	else
	{
		t.sExp = new RegExp(",");
	}
	t.oLast = {"str":false, "arr":false};
	t.oThis = {"str":false, "arr":false};
	t.oEl = {"start":false, "end":false};
	t.oUnfinedWords = {};
	// Flags
	t.bReady = true, t.eFocus = true;
	// Array with results & it`s showing
	t.aDiv = null, t.oDiv = null;
	// Pointers
	t.oActive = null, t.oPointer = Array(), t.oPointer_default = Array(), t.oPointer_this = 'input_field';

	t.oObj.onblur = function(){t.eFocus = false;}
	t.oObj.onfocus = function(){if (!t.eFocus){t.eFocus = true; setTimeout(function(){t.CheckModif('focus')}, 500);}}

	t.oLast["arr"] = t.oObj.value.split(t.sExp);
	t.oLast["str"] = t.oLast["arr"].join(":");

	setTimeout(function(){t.CheckModif('this')}, 500);

	this.CheckModif = function(__data)
	{
		var
			sThis = false, tmp = 0,
			bUnfined = false, word = "",
			cursor = {};

		if (!t.eFocus)
			return;

		if (t.bReady && t.oObj.value.length > 0)
		{
			// Preparing input data
			t.oThis["arr"] = t.oObj.value.split(t.sExp);
			t.oThis["str"] = t.oThis["arr"].join(":");

			// Getting modificated element
			if (t.oThis["str"] && (t.oThis["str"] != t.oLast["str"]))
			{
				cursor['position'] = TCJsUtils.getCursorPosition(t.oObj);
				if (cursor['position']['end'] > 0 && !t.sExp.test(t.oObj.value.substr(cursor['position']['end']-1, 1)))
				{
					cursor['arr'] = t.oObj.value.substr(0, cursor['position']['end']).split(t.sExp);
					sThis = t.oThis["arr"][cursor['arr'].length - 1];

					t.oEl['start'] = cursor['position']['end'] - cursor['arr'][cursor['arr'].length - 1].length;
					t.oEl['end'] = t.oEl['start'] + sThis.length;
					t.oEl['content'] = sThis;

					t.oLast["arr"] = t.oThis["arr"];
					t.oLast["str"] = t.oThis["str"];
				}
			}
			if (sThis)
			{
				// Checking for UnfinedWords
				for (tmp = 2; tmp <= sThis.length; tmp++)
				{
					word = sThis.substr(0, tmp);
					if (t.oUnfinedWords[word] == '!fined')
					{
						bUnfined = true;
						break;
					}
				}
				if (!bUnfined)
					t.Send(sThis);
			}
		}
		setTimeout(function(){t.CheckModif('this')}, 500);
	},

	t.Send = function(sSearch)
	{
		if (!sSearch)
			return false;

		var TID = null, oError = Array();
		t.bReady = false;
		PShowWaitMessage('wait_container', true);
		TID = CPHttpRequest.InitThread();
		CPHttpRequest.SetAction(
			TID,
			function(data)
			{
				var result = {};
				t.bReady = true;

				try
				{
					eval("result = " + data + ";");
				}
				catch(e)
				{
					oError['result_unval'] = e;
				}

				if (TCJsUtils.empty(result))
					oError['result_empty'] = 'Empty result';

				try
				{
					if (TCJsUtils.empty(oError) && (typeof result == 'object'))
					{
						if (!(result.length == 1 && result[0]['NAME'] == t.oEl['content']))
						{
							t.Show(result);
							return;
						}
					}
					else
					{
						t.oUnfinedWords[t.oEl['content']] = '!fined';
					}
				}
				catch(e)
				{
					oError['unknown_error'] = e;
				}

				PCloseWaitMessage('wait_container', true);
				return;
			}
		);
		CPHttpRequest.Send(TID, '/bitrix/components/bitrix/search.suggest.input/search.php', {"search":sSearch, "params":t.sParams});
	},

	t.Show = function(result)
	{
		t.Destroy();
		t.oDiv = document.body.appendChild(document.createElement("DIV"));
		t.oDiv.id = t.oObj.id+'_div';

		t.oDiv.className = "search-popup";
		t.oDiv.style.position = 'absolute';

		t.aDiv = t.Print(result);
		var pos = TCJsUtils.GetRealPos(t.oObj);
		t.oDiv.style.width = parseInt(pos["width"]) + "px";
		TCJsUtils.show(t.oDiv, pos["left"], pos["bottom"]);
		TCJsUtils.addEvent(document, "click", t.CheckMouse);
		TCJsUtils.addEvent(document, "keydown", t.CheckKeyword);
	},

	t.Print = function(aArr)
	{
		var
			aEl = null, sPrefix = '', sColumn = '',
			aResult = Array(), aRes = Array(),
			iCnt = 0, tmp = 0, tmp_ = 0, bFirst = true,
			oDiv = null, oSpan = null;

		sPrefix = t.oDiv.id;

		for (tmp_ in aArr)
		{
			// Math
			aEl = aArr[tmp_];
			aRes = Array();
			aRes['ID'] = (aEl['ID'] && aEl['ID'].length > 0) ? aEl['ID'] : iCnt++;
			aRes['GID'] = sPrefix + '_' + aRes['ID'];
			aRes['NAME'] = TCJsUtils.htmlspecialcharsEx(aEl['NAME']);
			aRes['CNT'] = aEl['CNT'];
			aResult[aRes['GID']] = aRes;
			t.oPointer.push(aRes['GID']);
			// Graph
			oDiv = t.oDiv.appendChild(document.createElement("DIV"));
			oDiv.id = aRes['GID'];
			oDiv.name = sPrefix + '_div';

			oDiv.className = 'search-popup-row';

			oDiv.onmouseover = function(){t.Init(); this.className='search-popup-row-active';};
			oDiv.onmouseout = function(){t.Init(); this.className='search-popup-row';};
			oDiv.onclick = function(){t.oActive = this.id};

			oSpan = oDiv.appendChild(document.createElement("DIV"));
			oSpan.id = oDiv.id + '_NAME';
			oSpan.className = "search-popup-el search-popup-el-cnt";
			oSpan.innerHTML = aRes['CNT'];

			oSpan = oDiv.appendChild(document.createElement("DIV"));
			oSpan.id = oDiv.id + '_NAME';
			oSpan.className = "search-popup-el search-popup-el-name";
			oSpan.innerHTML = aRes['NAME'];

		}
		t.oPointer.push('input_field');
		t.oPointer_default = t.oPointer;
		return aResult;
	},

	t.Destroy = function()
	{
		try
		{
			TCJsUtils.hide(t.oDiv);
			t.oDiv.parentNode.removeChild(t.oDiv);
		}
		catch(e)
		{}
		t.aDiv = Array();
		t.oPointer = Array(), t.oPointer_default = Array(), t.oPointer_this = 'input_field';
		t.bReady = true, t.eFocus = true, oError = {},
		t.oActive = null;

		TCJsUtils.removeEvent(document, "click", t.CheckMouse);
		TCJsUtils.removeEvent(document, "keydown", t.CheckKeyword);
	},

	t.Replace = function()
	{
		if (typeof t.oActive == 'string')
		{
			var tmp = t.aDiv[t.oActive];
			var tmp1 = '';
			if (typeof tmp == 'object')
			{
				var elEntities = document.createElement("span");
				elEntities.innerHTML = TCJsUtils.htmlspecialcharsback(tmp['NAME']);
				tmp1 = elEntities.innerHTML;
			}
			//this preserves leading spaces
			var start = t.oEl['start'];
			while(start < t.oObj.value.length && t.oObj.value.substring(start, start+1) == " ")
				start++;

			t.oObj.value = t.oObj.value.substring(0, start) + tmp1 + t.oObj.value.substr(t.oEl['end']);
			TCJsUtils.setCursorPosition(t.oObj, start + tmp1.length);
		}
		return;
	},

	t.Init = function()
	{
		t.oActive = false;
		t.oPointer = t.oPointer_default;
		t.Clear();
		t.oPointer_this = 'input_pointer';
	},

	t.Clear = function()
	{
		var oEl = {}, ii = '';
		oEl = t.oDiv.getElementsByTagName("div");
		if (oEl.length > 0 && typeof oEl == 'object')
		{
			for (ii in oEl)
			{
				var oE = oEl[ii];
				if (oE && (typeof oE == 'object') && (oE.name == t.oDiv.id + '_div'))
				{
					oE.className = "search-popup-row";
				}
			}
		}
		return;
	},

	t.CheckMouse = function()
	{
		t.Replace();
		t.Destroy();
	},

	t.CheckKeyword = function(e)
	{
		if (!e)
			e = window.event;
		var
			oP = null,
			oEl = null,
			ii = null;
		if ((37 < e.keyCode && e.keyCode <41) || (e.keyCode == 13))
		{
			t.Clear();

			switch (e.keyCode)
			{
				case 38:
					oP = t.oPointer.pop();
					if (t.oPointer_this == oP)
					{
						t.oPointer.unshift(oP);
						oP = t.oPointer.pop();
					}

					if (oP != 'input_field')
					{
						t.oActive = oP;
						oEl = document.getElementById(oP);
						if (typeof oEl == 'object')
						{
							oEl.className = "search-popup-row-active";
						}
					}
					t.oPointer.unshift(oP);
					break;
				case 40:
					oP = t.oPointer.shift();
					if (t.oPointer_this == oP)
					{
						t.oPointer.push(oP);
						oP = t.oPointer.shift();
					}
					if (oP != 'input_field')
					{
						t.oActive = oP;
						oEl = document.getElementById(oP);
						if (typeof oEl == 'object')
						{
							oEl.className = "search-popup-row-active";
						}
					}
					t.oPointer.push(oP);
					break;
				case 39:
					t.Replace();
					t.Destroy();
					break;
				case 13:
					t.Replace();
					t.Destroy();
					break;
			}
			t.oPointer_this	= oP;
		}
		else
		{
			t.Destroy();
		}
//		return false;
	}
}

var TCJsUtils =
{
	arEvents: Array(),

	addEvent: function(el, evname, func)
	{
		if(el.attachEvent) // IE
			el.attachEvent("on" + evname, func);
		else if(el.addEventListener) // Gecko / W3C
			el.addEventListener(evname, func, false);
		else
			el["on" + evname] = func;
		this.arEvents[this.arEvents.length] = {'element': el, 'event': evname, 'fn': func};
	},

	removeEvent: function(el, evname, func)
	{
		if(el.detachEvent) // IE
			el.detachEvent("on" + evname, func);
		else if(el.removeEventListener) // Gecko / W3C
			el.removeEventListener(evname, func, false);
		else
			el["on" + evname] = null;
	},

	getCursorPosition: function(oObj)
	{
		var result = {'start': 0, 'end': 0};
		if (!oObj || (typeof oObj != 'object'))
			return result;
		try
		{
			if (document.selection != null && oObj.selectionStart == null)
			{
				oObj.focus();
				var
					oRange = document.selection.createRange(),
					oParent = oRange.parentElement(),
					sBookmark = oRange.getBookmark(),
					sContents = sContents_ = oObj.value,
					sMarker = '__' + Math.random() + '__';

				while(sContents.indexOf(sMarker) != -1)
				{
					sMarker = '__' + Math.random() + '__';
				}

				if (!oParent || oParent == null || (oParent.type != "textarea" && oParent.type != "text"))
				{
					return result;
				}

				oRange.text = sMarker + oRange.text + sMarker;
				sContents = oObj.value;
				result['start'] = sContents.indexOf(sMarker);
				sContents = sContents.replace(sMarker, "");
				result['end'] = sContents.indexOf(sMarker);
				oObj.value = sContents_;
				oRange.moveToBookmark(sBookmark);
				oRange.select();
				return result;
			}
			else
			{
				return {
				 	'start': oObj.selectionStart,
					'end': oObj.selectionEnd
				};
			}
		}
		catch(e){}
		return result;
	},

	setCursorPosition: function(oObj, iPosition)
	{
		var result = false;
		if (typeof oObj != 'object')
			return false;

		oObj.focus();

		try
		{
			if (document.selection != null && oObj.selectionStart == null)
			{
				var oRange = document.selection.createRange();
				oRange.select();
			}
			else
			{
				oObj.selectionStart = iPosition;
				oObj.selectionEnd = iPosition;
			}
			return true;
		}
		catch(e)
		{
			return false;
		}

	},

	printArray: function (oObj, sParser, iLevel)
	{
	    try
	    {
	        var result = '',
	        	space = '',
	        	i=null, j=0;

	        if (iLevel==undefined)
	            iLevel = 0;
	        if (!sParser)
	        	sParser = "\n";

	        for (j=0; j<=iLevel; j++)
	            space += '  ';

	        for (i in oObj)
	        {
	            if (typeof oObj[i] == 'object')
	                result += space+i + " = {"+ sParser + TCJsUtils.printArray(oObj[i], sParser, iLevel+1) + ", " + sParser + "}" + sParser;
	            else
	                result += space+i + " = " + oObj[i] + "; " + sParser;
	        }
	        return result;
	    }
	    catch(e)
	    {
	        return;
	    }
	},

	empty: function(oObj)
	{
		var result = true;
		if (oObj)
		{
		    for (i in oObj)
		    {
		    	 result = false;
		    	 break;
		    }
		}
		return result;
	},

	show: function(oDiv, iLeft, iTop)
	{
		if (typeof oDiv != 'object')
			return;
		var zIndex = parseInt(oDiv.style.zIndex);
		if(zIndex <= 0 || isNaN(zIndex))
			zIndex = 100;
		oDiv.style.zIndex = zIndex;
		oDiv.style.left = iLeft + "px";
		oDiv.style.top = iTop + "px";

		return oDiv;
	},

	hide: function(oDiv)
	{
		if(oDiv)
			oDiv.style.display = 'none';
	},

	GetRealPos: function(el)
	{
		if(!el || !el.offsetParent)
			return false;
		var res=Array();
		var objParent = el.offsetParent;
		res["left"] = el.offsetLeft;
		res["top"] = el.offsetTop;
		while(objParent && objParent.tagName != "BODY")
		{
			res["left"] += objParent.offsetLeft;
			res["top"] += objParent.offsetTop;
			objParent = objParent.offsetParent;
		}
		res["right"]=res["left"] + el.offsetWidth;
		res["bottom"]=res["top"] + el.offsetHeight;
		res["width"]=el.offsetWidth;
		res["height"]=el.offsetHeight;
		return res;
	},

	htmlspecialcharsEx: function(str)
	{
		res = str.replace(/&amp;/g, '&amp;amp;').replace(/&lt;/g, '&amp;lt;').replace(/&gt;/g, '&amp;gt;').replace(/&quot;/g, '&amp;quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
		return res;
	},

	htmlspecialcharsback: function(str)
	{
		res = str.replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;;/g, '"').replace(/&amp;/g, '&');
		return res;
	}
}
SuggestLoaded = true;
/* End */
;
; /* Start:"a:4:{s:4:"full";s:41:"/core/socialservices/ss.js?14234231861419";s:6:"source";s:26:"/core/socialservices/ss.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
function BxShowAuthService(id, suffix)
{
	var bxCurrentAuthId = ''; 
	if(window['bxCurrentAuthId'+suffix])
		bxCurrentAuthId = window['bxCurrentAuthId'+suffix];

	BX('bx_auth_serv'+suffix).style.display = '';
	if(bxCurrentAuthId != '' && bxCurrentAuthId != id)
	{
		BX('bx_auth_href_'+suffix+bxCurrentAuthId).className = '';
		BX('bx_auth_serv_'+suffix+bxCurrentAuthId).style.display = 'none';
	}
	BX('bx_auth_href_'+suffix+id).className = 'bx-ss-selected';
	BX('bx_auth_href_'+suffix+id).blur();
	BX('bx_auth_serv_'+suffix+id).style.display = '';
	var el = BX.findChild(BX('bx_auth_serv_'+suffix+id), {'tag':'input', 'attribute':{'type':'text'}}, true);
	if(el)
		try{el.focus();}catch(e){}
	window['bxCurrentAuthId'+suffix] = id;
    if(document.forms['bx_auth_services'+suffix])
        document.forms['bx_auth_services'+suffix].auth_service_id.value = id;
    else if(document.forms['bx_user_profile_form'+suffix])
        document.forms['bx_user_profile_form'+suffix].auth_service_id.value = id;
}

var bxAuthWnd = false;
function BxShowAuthFloat(id, suffix)
{
	var bCreated = false;
	if(!bxAuthWnd)
	{
		bxAuthWnd = new BX.CDialog({
			'content':'<div id="bx_auth_float_container"></div>', 
			'width': 640,
			'height': 400,
			'resizable': false
		});
		bCreated = true;
	}
	bxAuthWnd.Show();

	if(bCreated)
		BX('bx_auth_float_container').appendChild(BX('bx_auth_float'));
			
	BxShowAuthService(id, suffix);
}
/* End */
;; /* /bitrix/templates/esate_v2/js/jMenu.jquery.min.js?14234231522845*/
; /* /bitrix/templates/esate_v2/js/jquery-ui.js?14234231528662*/
; /* /bitrix/templates/esate_v2/js/esate2.js?14234231524570*/
; /* /core/core.js?14234231866503*/
; /* /core/auth.js?142843928023759*/
; /* /bitrix/templates/esate_v2/js/prism.js?142342315220411*/
; /* /bitrix/templates/.default/components/bitrix/search.suggest.input/seacrh_form_main/script.js?142342315112644*/
; /* /core/socialservices/ss.js?14234231861419*/
